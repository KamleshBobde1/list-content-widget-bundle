(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{740:function(e,t,n){},741:function(e,t,n){"use strict";n.r(t);n(328),n(329);var a,c,s=n(23),o=n(49),r=n(50),i=n(59),l=n(51),p=n(53),d=n(325),u=n(142),h=n(175),j=n(12),b=n.n(j),m=n(1),g=n.n(m),f=n(26),O=n.n(f),y=n(33),C=n(54),x=n.n(C),v=n(64),T=n.n(v),S=n(746),I=n(4),w=[5,10,15,25,50],N=Object(I.jsx)(S.a,{id:"app.select"}),k=Object(I.jsx)(S.a,{id:"app.name"}),M=Object(I.jsx)(S.a,{id:"app.created"}),Y=Object(I.jsx)(S.a,{id:"app.lastEdited"}),A=Object(I.jsx)(S.a,{id:"app.createdDate"}),B={SELECT:N,NAME:k,CREATEDBY:M,LASTEDITED:Y,CREATEDDATE:A},D=Object(I.jsx)(S.a,{id:"app.addNewContent"}),P="EntKcToken",W="YYYY-MM-DD HH:mm:ss",L=[".JPEG",".JPG",".PNG",".GIF",".SVG",".TIFF",".ICO",".DVU"],F="url",R=["createdAt","updatedAt","publishedAt","createdBy","updatedBy","id","localizations","locale"],E="13px",Z=Object(I.jsx)(S.a,{id:"app.noDataAvailable"}),Q="STRAPI_CONFIG",z="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PUBLIC_API_TARGET_URL:"http://172.40.0.142:8081",REACT_APP_PUBLIC_API_URL:"/entando-template-api/api",REACT_APP_STRAPI_CONFIG_BE_URL:"http://172.40.0.142:8082/api/config/",REACT_APP_STRAPI_CONFIG_FE_URL:"http://172.40.0.142:3001",REACT_APP_LOCAL_STRAPI_TOKEN:"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI5NWNKaVRjejRGTU00RFU5YWhaa0lVS3ZiZ0xEUEhsRDM5N190UG9YSDV3In0.eyJleHAiOjE2NTgyNDQ0MDEsImlhdCI6MTY1ODI0NDEwMSwiYXV0aF90aW1lIjoxNjU4MjQyOTExLCJqdGkiOiI4OWVlNTY3ZS1lN2NiLTQ5MTYtYjJhOC1iYjRkNTA1N2RhNmYiLCJpc3MiOiJodHRwOi8vcXVpY2tzdGFydC4xNzIuNDAuMC4xNDIubmlwLmlvL2F1dGgvcmVhbG1zL2VudGFuZG8iLCJhdWQiOlsicG4tZDdhZTc4YjItMWYzMWNiZDktYWtoaWxlc2hwcmFqYXBhdGludi1lbnQtcHJvamVjdC10ZW1wbGF0ZS1zZXJ2ZXIiLCJhY2NvdW50Il0sInN1YiI6ImM3NjgyODFmLTIxYTMtNDQyZC04OWMwLTY1OWVkMGE0ODA3YiIsInR5cCI6IkJlYXJlciIsImF6cCI6ImVudGFuZG8td2ViIiwibm9uY2UiOiI4NjhhZmYyNS1lODEwLTQ2ZjYtOGY5Mi00NTQwMzk1MjMwOTAiLCJzZXNzaW9uX3N0YXRlIjoiODk1ZGRmMDEtYzJhMi00ZjU5LWJkNDktMmQ1M2VjMzUxMmUxIiwiYWNyIjoiMCIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vcXVpY2tzdGFydC4xNzIuNDAuMC4xNDIubmlwLmlvIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1lbnRhbmRvIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicG4tZDdhZTc4YjItMWYzMWNiZDktYWtoaWxlc2hwcmFqYXBhdGludi1lbnQtcHJvamVjdC10ZW1wbGF0ZS1zZXJ2ZXIiOnsicm9sZXMiOlsiZW50YW5kb0FwcCIsImV0LXNlY29uZC1yb2xlIiwiZXQtZmlyc3Qtcm9sZSJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6Ijg5NWRkZjAxLWMyYTItNGY1OS1iZDQ5LTJkNTNlYzM1MTJlMSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.J-HC2QrFYZrL_29XIoXHnSnOpsWABPLY6HtmNPsz5XFo7jNgyhZtYuPX-DsunvVHG09DnfM0O9uJIG9gWDWmYr12cge1q_jwfvcai5B9fjXzRRc_QO7zOsXUlliJYKnYlngLYTrYwZVOYNKPrveIlTHci1cHMy16dH5ljGaqr2mxo9EWYvfYwE49RJQXeAE2vShuipz9at5d4mywOc8eeTBTQc47fhrqD5fvqwhYnFA9Olmp1viLYNowOMQClhoGJJ0XUTnc2tAsZNqXeIHzT-Jj9tg0gjS7VY6AfFtq55ay6X-UWtpXoZdDe6GrLzLKQu_KAgpzR_jjTTdFJUnioQ"}).REACT_APP_STRAPI_API_URL),J="".concat("/entando-template-api/api","/template/"),U=("".concat(z,"/content-manager/collection-types/api::"),"&sort=createdAt:DESC"),_=("".concat(z,"/i18n/locales"),{Authorization:"EntKcToken ".concat("eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI5NWNKaVRjejRGTU00RFU5YWhaa0lVS3ZiZ0xEUEhsRDM5N190UG9YSDV3In0.eyJleHAiOjE2NTgyNDQ0MDEsImlhdCI6MTY1ODI0NDEwMSwiYXV0aF90aW1lIjoxNjU4MjQyOTExLCJqdGkiOiI4OWVlNTY3ZS1lN2NiLTQ5MTYtYjJhOC1iYjRkNTA1N2RhNmYiLCJpc3MiOiJodHRwOi8vcXVpY2tzdGFydC4xNzIuNDAuMC4xNDIubmlwLmlvL2F1dGgvcmVhbG1zL2VudGFuZG8iLCJhdWQiOlsicG4tZDdhZTc4YjItMWYzMWNiZDktYWtoaWxlc2hwcmFqYXBhdGludi1lbnQtcHJvamVjdC10ZW1wbGF0ZS1zZXJ2ZXIiLCJhY2NvdW50Il0sInN1YiI6ImM3NjgyODFmLTIxYTMtNDQyZC04OWMwLTY1OWVkMGE0ODA3YiIsInR5cCI6IkJlYXJlciIsImF6cCI6ImVudGFuZG8td2ViIiwibm9uY2UiOiI4NjhhZmYyNS1lODEwLTQ2ZjYtOGY5Mi00NTQwMzk1MjMwOTAiLCJzZXNzaW9uX3N0YXRlIjoiODk1ZGRmMDEtYzJhMi00ZjU5LWJkNDktMmQ1M2VjMzUxMmUxIiwiYWNyIjoiMCIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vcXVpY2tzdGFydC4xNzIuNDAuMC4xNDIubmlwLmlvIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1lbnRhbmRvIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicG4tZDdhZTc4YjItMWYzMWNiZDktYWtoaWxlc2hwcmFqYXBhdGludi1lbnQtcHJvamVjdC10ZW1wbGF0ZS1zZXJ2ZXIiOnsicm9sZXMiOlsiZW50YW5kb0FwcCIsImV0LXNlY29uZC1yb2xlIiwiZXQtZmlyc3Qtcm9sZSJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6Ijg5NWRkZjAxLWMyYTItNGY1OS1iZDQ5LTJkNTNlYzM1MTJlMSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.J-HC2QrFYZrL_29XIoXHnSnOpsWABPLY6HtmNPsz5XFo7jNgyhZtYuPX-DsunvVHG09DnfM0O9uJIG9gWDWmYr12cge1q_jwfvcai5B9fjXzRRc_QO7zOsXUlliJYKnYlngLYTrYwZVOYNKPrveIlTHci1cHMy16dH5ljGaqr2mxo9EWYvfYwE49RJQXeAE2vShuipz9at5d4mywOc8eeTBTQc47fhrqD5fvqwhYnFA9Olmp1viLYNowOMQClhoGJJ0XUTnc2tAsZNqXeIHzT-Jj9tg0gjS7VY6AfFtq55ay6X-UWtpXoZdDe6GrLzLKQu_KAgpzR_jjTTdFJUnioQ")}),V=function(){var e=Object(s.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=x.a,e.t1="",e.next=4,ce();case 4:return e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2,"/content-manager/content-types"),e.t4=te({},P),e.next=9,e.t0.get.call(e.t0,e.t3,e.t4);case 9:return t=e.sent,n=t.data,e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(s.a)(b.a.mark((function e(t){var n,a,c,s,o,r,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:1,a=i.length>2&&void 0!==i[2]?i[2]:5,e.t0="",e.next=5,ce();case 5:return e.t1=e.sent,c=e.t0.concat.call(e.t0,e.t1,"/content-manager/collection-types/api::"),s="".concat(c).concat(t,".").concat(t,"?page=").concat(n,"&pageSize=").concat(a).concat(U),e.next=10,x.a.get(s,te({},P));case 10:return o=e.sent,r=o.data,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(s.a)(b.a.mark((function e(){var t,n,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="",e.next=3,ce();case 3:return e.t1=e.sent,t=e.t0.concat.call(e.t0,e.t1,"/i18n/locales"),n="".concat(t),e.next=8,x.a.get(n,te({},P));case 8:return a=e.sent,c=a.data,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(s.a)(b.a.mark((function e(t,n){var a,c,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="",e.next=3,ce();case 3:return e.t1=e.sent,a=e.t0.concat.call(e.t0,e.t1,"/content-manager/collection-types/api::"),c="".concat(a).concat(t,".").concat(t,"?page=1&pageSize=").concat(n,"&sort=id:ASC"),e.next=8,x.a.get(c,te({},P));case 8:return s=e.sent,o=s.data,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(s.a)(b.a.mark((function e(t,n){var a,c,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="",e.next=3,ce();case 3:return e.t1=e.sent,a=e.t0.concat.call(e.t0,e.t1,"/content-manager/collection-types/api::"),c="".concat(a).concat(t,".").concat(t,"/").concat(n),e.next=8,x.a.get(c,te({},P));case 8:return s=e.sent,o=s.data,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(b.a.mark((function e(t,n,a){var c,s,o,r,i,l,p=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=p.length>3&&void 0!==p[3]?p[3]:1,s=p.length>4&&void 0!==p[4]?p[4]:5,t){e.next=4;break}throw new Error("collectionType is missing");case 4:return e.t0="",e.next=7,ce();case 7:return e.t1=e.sent,o=e.t0.concat.call(e.t0,e.t1,"/content-manager/collection-types/api::"),r="".concat(o).concat(t,".").concat(t,"?filters[").concat(a,"][$containsi]=").concat(n,"&page=").concat(c,"&pageSize=").concat(s),e.next=12,x.a.get(r,te({},P));case 12:return i=e.sent,l=i.data,e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),$=function(){var e=Object(s.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?"?collectionType=".concat(t):"",e.next=3,x.a.get("".concat(J+n),te({}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(e){var t=window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:localStorage.getItem("token");return t?{headers:{Authorization:"".concat(e," ").concat(t)}}:e===P?{headers:_}:{}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Bearer",n=ee(t);return Object(y.a)(Object(y.a)({},e),n)},ne=function(){var e=Object(s.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://172.40.0.142:8082/api/config/").then((function(e){return e})).catch((function(e){return e}));case 2:return t=e.sent,e.abrupt("return",se(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(s.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.head(t).then((function(e){return e})).catch((function(e){return e}));case 2:return n=e.sent,e.abrupt("return",se(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(s.a)(b.a.mark((function e(){var t,n,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(Q)){e.next=14;break}return e.next=4,ne();case 4:if(n=e.sent,a=n.data,n.isError||!a||!a.data||!a.data.baseUrl){e.next=14;break}return e.next=10,ae(a.data.baseUrl);case 10:if(!(c=e.sent)||!c.data||200!==c.data.status||c.isError){e.next=14;break}return localStorage.setItem(Q,a.data.baseUrl),e.abrupt("return",a.data.baseUrl);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(e){var t=!1;return e.hasOwnProperty("toJSON")&&"Error"===e.toJSON().name&&(t=!0),{data:e,isError:t}},oe=n(91),re=n(72),ie=n(30),le=n(745),pe=n(13),de=function(e){if(e){var t=Object.keys(e),n=t.findIndex((function(e){return"title"===e.toLowerCase()}));if(n>-1)return Object.keys(e)[n];if((n=t.findIndex((function(e){return"name"===e.toLowerCase()})))>-1)return Object.keys(e)[n];var a=t.filter((function(e){return!R.includes(e)}));if(a&&a.length)return a[0]}return searchByKey="","-"},ue=function(e){return e.length>0?JSON.parse(e):e},he=n(107),je=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){ue(decodeURI(a.props.contentIdAndTemplateId)).length&&a.getContentByHighestId(),a.props.contentIdAndTemplateId||a.setState({loadingData:!1})},a.componentDidUpdate=function(e,t){e.contentIdAndTemplateId!==a.props.contentIdAndTemplateId&&ue(decodeURI(a.props.contentIdAndTemplateId)).length&&a.getContentByHighestId()},a.getContentByHighestId=Object(s.a)(b.a.mark((function e(){var t,n,c,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({loadingData:!0}),t=a.props.contentIdAndTemplateId&&ue(decodeURI(a.props.contentIdAndTemplateId)),n=[],!t){e.next=8;break}return c=t.map((function(e){return e.contentId})).sort((function(e,t){return e-t})).reverse()[0],e.next=7,H(a.props.selectedContentName,c);case 7:n=e.sent;case 8:(s=a.props.selectedContent.length?ue(a.props.selectedContent):"").length&&((o=s.map((function(e){return n.results.find((function(t){return t.id===e.id}))}))).map((function(e){t.find((function(t){e.id===+t.contentId&&(e.templateId=+t.templateId)}))})),a.setState({selectedContent:o,loadingData:!1}));case 10:case"end":return e.stop()}}),e)}))),a.renderToggleButton=function(e){e.isMenuShown;var t=e.onClick;return Object(I.jsx)("button",{type:"button",style:{position:"absolute",height:"100%",top:"0px",right:"0px",border:"1px solid lightgray"},onClick:function(e){e.preventDefault(),t(e)},children:Object(I.jsx)("span",{className:"fa fa-angle-down"})})},a.onChangeTemplateId=function(e,t){a.setState({templateSelectedForContent:e.target.value}),a.setState({templateChangedForContent:t});var n=ue(a.props.mappingOfContentTemplate).map((function(n){return n.contentId===t&&(n.templateId=e.target.value),{id:n.id,contentId:n.contentId,templateId:n.templateId}}));a.props.setContentTemplate(n)},a.onApplyToAll=function(){document.getElementsByName("modelId").forEach((function(e){e.value="".concat(a.state.templateSelectedForContent)}));var e=ue(a.props.mappingOfContentTemplate).map((function(e){return Object(y.a)(Object(y.a)({},e),{},{templateId:a.state.templateSelectedForContent.toString()})}));a.props.setContentTemplate(e);var t=a.state.selectedContent.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{templateId:a.state.templateSelectedForContent.toString()})}));a.setState({selectedContent:t})},a.selectTempForContent=function(e){return e.templateId?e.templateId:"none"},a.state={templateType:[{label:"vj"}],selectedTemplateType:[],templateChangedForContent:null,templateSelectedForContent:0,selectedContent:[],loadingData:!1},a}return Object(r.a)(n,[{key:"render",value:function(){var e=this;this.props.contentIdAndTemplateId&&ue(decodeURI(this.props.contentIdAndTemplateId));return Object(I.jsxs)(I.Fragment,{children:[this.state.loadingData&&Object(I.jsx)(he.Spinner,{loading:this.state.loadingData,className:"",size:"md"}),!this.state.loadingData&&Object(I.jsxs)("table",{className:"table table-bordered table-datatable table-hover table-striped Contents__table-element",children:[Object(I.jsx)("thead",{children:Object(I.jsx)("tr",{className:this.props.decideToShowQuery()?"disabled-table":"",children:Object.keys(be).map((function(e,t){return Object(I.jsx)("th",{children:Object(I.jsx)(S.a,{id:be[e]})},t)}))})}),Object(I.jsx)("tbody",{children:this.state.selectedContent.length>0&&this.state.selectedContent.map((function(t){return Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:t[de(t)]}),Object(I.jsx)("td",{children:"".concat(t.createdBy.firstname," ").concat(t.createdBy.lastname)}),Object(I.jsx)("td",{children:T()(new Date(t.updatedAt)).format(W)}),Object(I.jsx)("td",{children:T()(new Date(t.publishedAt)).format(W)}),Object(I.jsxs)("td",{width:"30%",children:[Object(I.jsxs)("select",{style:{display:"inline-block",width:"50%"},name:"modelId",className:"form-control",onChange:function(n){return e.onChangeTemplateId(n,t.id)},children:[Object(I.jsx)(S.a,{id:"app.selectTemplate",children:function(e){return Object(I.jsx)("option",{selected:!t.templateId,value:"none",disabled:!0,hidden:!0,children:e})}}),e.props.templateList.length>0&&e.props.templateList.map((function(e){return Object(I.jsx)("option",{selected:+t.templateId===+e.id,value:e.id,children:e.templateName},e.id)}))]}),t.id===e.state.templateChangedForContent&&Object(I.jsx)("div",{onClick:e.onApplyToAll,style:{display:"inline-block",width:"50%",textAlign:"center"},children:Object(I.jsxs)(re.b,{to:"#",children:[Object(I.jsx)("span",{className:"fa fa-copy",style:{margin:"0px 10px"}}),Object(I.jsx)(S.a,{id:"app.applyToAllContents"})]})})]})]},t.id)}))})]})]})}}]),n}(g.a.Component),be={Title:"app.name",createdAt:"app.created",updatedAt:"app.lastEdited",createDate:"app.createdDate",selectDefaultTemplate:"app.selectDefaultTemplate"},me=n(137),ge=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).setSelectedContent=function(e,t){},a.handleTypeaheadChangeContentType=function(e){var t=e.map((function(e){return e.label}));a.setState({templateList:t})},a.componentDidMount=Object(s.a)(b.a.mark((function e(){var t,n,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return t=(t=e.sent).data.filter((function(e){return e&&e.uid&&e.uid.startsWith("api::")&&e.isDisplayed})),n=[],t.length&&t.forEach((function(e){n.push({label:e.info.pluralName})})),e.next=8,$(a.props.selectedContentName?a.props.selectedContentName:"");case 8:c=e.sent,s=c.data,a.setState({templateList:s,collectionTypes:s});case 11:case"end":return e.stop()}}),e)}))),a.componentDidUpdate=function(e,t){if(e.saveQuery!==a.props.saveQuery){var n=ue(decodeURI(a.props.saveQuery));n&&a.setState({templateId:n.templateId})}},a.handleAddNewContent=Object(s.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="",e.next=3,ce();case 3:e.t1=e.sent,t=e.t0.concat.call(e.t0,e.t1).concat("/admin/content-manager"),(n=window.open(t,"_blank"))&&n.focus();case 7:case"end":return e.stop()}}),e)}))),a.decideToShowQuery=function(){return a.props.selectedContentLabel&&!a.props.selectedContent.length},a.onChangeTemplateId=function(e){a.props.SaveQueryHandler({templateId:e.target.value,searchTerm:a.props.searchTerm})},a.state={collectionTypes:[],templateList:[],templateId:"none"},a.handleAddNewContent=a.handleAddNewContent.bind(Object(i.a)(a)),a}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return Object(I.jsx)("form",{className:"form-horizontal SingleContentConfigForm well",children:Object(I.jsx)(pe.Row,{children:Object(I.jsx)(pe.Col,{xs:12,children:Object(I.jsx)("div",{children:Object(I.jsxs)("div",{children:[Object(I.jsx)("span",{className:"icon fa fa-puzzle-piece",title:"Widget"}),Object(I.jsx)("h5",{className:"SingleContentConfigFormBody__widgetTitle",children:Object(I.jsx)(S.a,{id:"app.contentList"})}),Object(I.jsx)("div",{className:"SectionTitle SectionTitle__non-collapsable",role:"button",children:Object(I.jsx)("span",{children:Object(I.jsx)(S.a,{id:"app.info"})})}),Object(I.jsxs)("div",{className:"row",children:[Object(I.jsx)(pe.Col,{xs:6,children:Object(I.jsxs)("h3",{className:"SingleContentConfigFormBody__contentTitle",children:[Object(I.jsx)(S.a,{id:"app.content"}),": -"]})}),Object(I.jsxs)(pe.Col,{xs:6,className:"SingleContentConfigFormBody__addButtons",children:[Object(I.jsx)(re.b,{to:"/configpage",children:Object(I.jsxs)(pe.Button,{bsStyle:"primary",onClick:function(){return(e.decideToShowQuery()||e.props.selectedContent.length)&&e.props.manipulateIsEditable("edit")},children:[this.props.selectedContent.length||this.decideToShowQuery()?Object(I.jsx)(S.a,{id:"app.edit"}):Object(I.jsx)(S.a,{id:"app.addExistingContent"}),!this.decideToShowQuery()&&this.props.selectedContent.length>0&&" list of ",this.decideToShowQuery()&&Object(I.jsx)(S.a,{id:"app.query"}),this.props.selectedContent.length?Object(I.jsx)(S.a,{id:"app.contentsButton"}):this.decideToShowQuery()?"":Object(I.jsx)(S.a,{id:"app.contentButton"})]})}),Object(I.jsx)(pe.Button,{className:"AddContentTypeFormBody__save--btn",bsStyle:"primary",onClick:this.handleAddNewContent,children:D})]})]}),Object(I.jsx)("div",{style:{marginTop:"1rem"}}),Object(I.jsx)(je,{setTemplateId:this.props.setTemplateId,templateList:this.state.templateList,selectedContent:this.props.selectedContent,mappingOfContentTemplate:this.props.mappingOfContentTemplate,setContentTemplate:this.props.setContentTemplate,decideToShowQuery:this.decideToShowQuery,contentIdAndTemplateId:this.props.contentIdAndTemplateId,selectedContentName:this.props.selectedContentName}),Object(I.jsxs)("div",{className:"form-horizontal SingleContentConfigForm custom-well well",children:[Object(I.jsxs)(pe.Row,{className:"divider",children:[Object(I.jsx)(pe.Col,{xs:2,children:Object(I.jsx)("span",{className:"SectionTitle",role:"button",children:Object(I.jsx)("span",{children:Object(I.jsx)(S.a,{id:"app.query"})})})}),Object(I.jsx)(pe.Col,{xs:10,children:Object(I.jsx)("div",{className:"SingleContentConfigFormBody__addButtons",children:Object(I.jsx)("span",{children:Object(I.jsx)("b",{children:Object(I.jsx)(S.a,{id:"app.selectDefaultTemplate"})})})})})]}),this.decideToShowQuery()&&Object(I.jsxs)(pe.Row,{children:[Object(I.jsx)(pe.Col,{xs:2,style:{borderRight:"1px solid lightgrey"},children:Object(I.jsx)(S.a,{id:"app.savedAsQuery"})}),Object(I.jsx)(pe.Col,{xs:1,style:{borderRight:"1px solid lightgrey"}}),Object(I.jsx)(pe.Col,{lg:6,style:{border:"1px solid lightgrey",padding:".2rem"},children:Object(I.jsxs)("code",{children:[Object(I.jsxs)("span",{style:{color:"#0088ce"},children:[Object(I.jsx)("b",{children:"Collection Type =  "})," ",this.props.selectedContentLabel," "]}),Object(I.jsxs)("span",{style:{color:"#0088ce"},children:[this.props.searchTerm&&Object(I.jsx)("b",{children:"WHERE Name =  "}),this.props.searchTerm&&"%".concat(this.props.searchTerm,"% "),Object(I.jsx)("b",{children:"ORDER BY"})," creation date ",Object(I.jsx)("b",{children:"DESC"})]})]})}),Object(I.jsx)(pe.Col,{lg:3,children:Object(I.jsx)("div",{className:"SingleContentConfigFormBody__addButtons",children:Object(I.jsxs)("select",{style:{display:"inline-block"},name:"modelId",className:"form-control",onChange:function(t){return e.onChangeTemplateId(t)},children:[Object(I.jsx)("option",{selected:"none"===this.state.templateId,value:"none",disabled:!0,hidden:!0,children:this.props.intl.formatMessage({id:"app.selectTemplate"})}),this.state.templateList.length>0&&this.state.templateList.map((function(t){return Object(I.jsx)("option",{selected:+e.state.templateId===+t.id,value:t.id,children:t.templateName},t.id)}))]})})})]})]})]})})})})})}}]),n}(m.Component),fe=Object(me.c)(ge),Oe=n(324),ye=n(323),Ce=n(93),xe=n(135),ve=n(308),Te=1,Se=function(e,t){return Te+=1,Object(I.jsx)(xe.a,{accordion:!0,id:Te,style:{marginBottom:"5px"},children:e&&Object.keys(e).length>0?Le(e)?Ne(F,0,e.url,t):Object.keys(e).filter((function(e){return Re(e)})).map((function(n,a){var c,s;return we(e)&&n&&(Number(n)||0===Number(n))?(e[n]&&((c=Ie(e[n]))&&!Number(c)?delete(s=Object(y.a)({},e[n])).__component:(c=n,s=e[n])),c&&(Number(c)||0===Number(c))&&(c=(c=Number(c)+1).toString())):(c=n,s=e[n]),Ne(c,a,s,t)})):Object(I.jsx)("span",{children:Z})})},Ie=function(e){if(e&&Object.keys(e).includes("__component")){var t=e.__component&&e.__component.split(".");if(t&&t.length>0)return t[1]&&t[1].indexOf("-")?t[1].replace("-","_"):t[1]}},we=function(e){return!!e&&!!Array.isArray(e)},Ne=function(e,t,n,a){return Object(I.jsxs)(ve.a,{eventKey:t,children:[ke(e,n,a),We(n)&&Ae(n,!0,a)]},t)},ke=function(e,t,n){return Object(I.jsx)(ve.a.Heading,{children:We(t)&&!Le(t)?Ye(e):Me(e,t,n)})},Me=function(e,t,n){return Object(I.jsx)(ve.a.Title,{children:Object(I.jsxs)(Ce.Grid.Row,{className:"show-grid",style:{display:"flex",fontSize:E},children:[Object(I.jsx)(Ce.Grid.Col,{style:{width:"10%",marginLeft:"2.5rem",wordBreak:"break-word"},children:Object(I.jsx)("div",{children:Object(I.jsx)("strong",{children:Le(t)&&Fe(e)?"Photo "+e.charAt(0).toUpperCase()+e.slice(1):e.charAt(0).toUpperCase()+e.slice(1)})})}),Object(I.jsx)(Ce.Grid.Col,{style:{width:"90%",marginLeft:"1rem",paddingRight:"2rem",lineHeight:"1.2"},children:Le(t)?Be(t[F.toLowerCase()],n):Be(t,n)})]})})},Ye=function(e){return Object(I.jsx)(ve.a.Title,{toggle:!0,style:{marginLeft:"-1rem",fontSize:E},children:Object(I.jsx)("span",{children:Object(I.jsx)("strong",{children:e.charAt(0).toUpperCase()+e.slice(1)})})})},Ae=function(e,t,n){return t?Object(I.jsx)(ve.a.Body,{collapsible:!0,children:Se(e,n)}):Object(I.jsx)(ve.a.Body,{collapsible:!0,children:Object(I.jsx)("span",{children:e})})},Be=function(e,t){return null===e||void 0===e?Object(I.jsx)("span",{children:" - "}):"boolean"===typeof e?Object(I.jsx)("span",{children:e.toString()}):"string"===typeof e?Pe(e)?Object(I.jsx)("img",{src:t+e,width:"50px",height:"50px",alt:"image"}):De(e)?Object(I.jsx)("span",{children:T()(new Date(e)).format(W)}):Object(I.jsx)("span",{style:{wordBreak:"break-word"},children:e}):"number"===typeof e?Object(I.jsx)("span",{children:e}):"object"===typeof e?e:Object(I.jsx)("span",{children:" - "})},De=function(e){return!!(e&&e&&e.endsWith("Z")&&24===e.length&&10===e.split("T")[0].length&&13===e.split("T")[1].length)},Pe=function(e){var t,n=Object(oe.a)(L);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e.toUpperCase().endsWith(a))return!0}}catch(c){n.e(c)}finally{n.f()}return!1},We=function(e){return!!e&&"object"===typeof e},Le=function(e){var t=e&&Object.keys(e);return!!(t&&t.includes("ext")&&t.includes("formats")&&t.includes("url")&&L.includes(e.ext.toUpperCase()))},Fe=function(e){return!!(e&&Number(e)&&Number(e)>=0)},Re=function(e){return!R.includes(e)},Ee=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).toggleTab=function(e){a.props.setActiveTabKey(e),a.state.dataToShowOnModal.localizations&&a.state.dataToShowOnModal.localizations.length>0&&a.getCollectionByLocaleName(a.state.currentCode[e])},a.getLocaleInfo=Object(s.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:t=e.sent,a.setState({localeInfo:t});case 4:case"end":return e.stop()}}),e)}))),a.componentDidMount=Object(s.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.getLocaleInfo(),e.next=3,ce();case 3:t=e.sent,a.setState({strapiBaseUrl:t});case 5:case"end":return e.stop()}}),e)}))),a.getCollectionByLocaleName=function(){var e=Object(s.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(a.props.collectionType,t);case 2:n=e.sent,t===a.props.contentId?a.setState({dataToShowOnModal:Object(y.a)({},n)}):a.setState({dataToShowOnModalRestTabs:Object(y.a)({},n)});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.componentDidUpdate=function(){var e=Object(s.a)(b.a.mark((function e(t,n){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.collectionType||!a.props.contentId){e.next=9;break}if(t.collectionType===a.props.collectionType&&t.contentId===a.props.contentId){e.next=9;break}return e.next=4,K(a.props.collectionType,a.props.contentId);case 4:c=e.sent,a.setState({dataToShowOnModal:Object(y.a)({},c)}),a.setState({dataToShowOnModalRestTabs:Object(y.a)({},c)}),a.props.setActiveTabKey(0),a.setState({currentCode:[a.props.contentId]});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.state={show:!0,collectionTypes:[],mockRows:[],selectedContent:[],selectedCollectionType:null,collectionAttributes:a.props.dummyData,dataToShowOnModal:{},localeInfo:[],currentCode:[a.props.contentId],dataToShowOnModalRestTabs:{},strapiBaseUrl:""},a.toggleTab=a.toggleTab.bind(Object(i.a)(a)),a.getCollectionByLocaleName=a.getCollectionByLocaleName.bind(Object(i.a)(a)),a}return Object(r.a)(n,[{key:"getLocaleFullName",value:function(e){return this.state.localeInfo.filter((function(t){return t.code===e}))[0].name}},{key:"render",value:function(){var e=this;return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(pe.Modal,{dialogClassName:"ContentsFilterModal",show:this.props.show,onHide:this.props.onHide,children:[Object(I.jsx)(pe.Modal.Header,{children:Object(I.jsx)(pe.Modal.Title,{children:this.state.dataToShowOnModal&&Object.keys(this.state.dataToShowOnModal).length>0&&this.props.fetchTitleOrName(this.state.dataToShowOnModal)})}),Object(I.jsxs)(pe.Modal.Body,{children:[Object(I.jsx)("div",{className:"CollapsibleSection__title no-padding",role:"button",tabIndex:0}),Object(I.jsx)("div",{children:Object(I.jsxs)(pe.Tabs,{id:"id",activeKey:this.props.activeTabKey,onSelect:this.toggleTab,children:[this.state.dataToShowOnModal&&this.state.dataToShowOnModal.locale?Object(I.jsx)(pe.Tab,{eventKey:0,title:this.getLocaleFullName(this.state.dataToShowOnModal.locale).split(" ")[0],style:{overflowY:"auto",height:"38rem",overflowX:"hidden"},children:Se(this.state.dataToShowOnModal,this.state.strapiBaseUrl)}):Object(I.jsx)(pe.Tab,{eventKey:0,title:"English",style:{overflowY:"auto",height:"38rem",overflowX:"hidden"},children:Se(this.state.dataToShowOnModal,this.state.strapiBaseUrl)}),this.state.dataToShowOnModal.localizations&&this.state.dataToShowOnModal.localizations.length>0&&this.state.dataToShowOnModal.localizations.map((function(t,n){return e.state.currentCode.push(t.id),Object(I.jsx)(pe.Tab,{eventKey:n+1,title:e.getLocaleFullName(t.locale).split(" ")[0],style:{overflowY:"auto",height:"38rem",overflowX:"hidden"},children:Se(e.state.dataToShowOnModal,e.state.strapiBaseUrl)},n+1)}))]})})]}),Object(I.jsx)(pe.Modal.Footer,{children:Object(I.jsx)(pe.Button,{bsStyle:"primary",onClick:this.props.onHide,children:"Ok"})})]})})}}]),n}(m.Component),Ze=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(s.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.populateConfigForm(),e.next=3,a.setCollectionTypeState();case 3:a.shouldShowEtSaveBtn("hidden");case 4:case"end":return e.stop()}}),e)}))),a.componentDidUpdate=function(){var e=Object(s.a)(b.a.mark((function e(t,n){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t.selectedCollectionType!==a.props.selectedCollectionType||n.pageSize!==a.state.pageSize&&!a.state.searchBtnClk)&&a.setState({page:1,pageInput:1,currPageWillUpdating:1},Object(s.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getContentsByCollectionType(a.state.selectedCollectionType[0].value,a.state.page,a.state.pageSize);case 2:case"end":return e.stop()}}),e)})))),n.page===a.state.page||a.state.searchBtnClk){e.next=11;break}if(!a.props.searchText&&!a.searchByKey){e.next=9;break}return e.next=5,q(a.state.selectedCollectionType[0].value?a.state.selectedCollectionType[0].value:a.props.selectedCollectionTypeValue.value,a.state.searchQuery?a.state.searchQuery:a.props.searchText,a.props.colLabel,a.state.page,a.state.pageSize);case 5:c=e.sent,a.stateUpdateOnFilterContentsByName(c),e.next=11;break;case 9:return e.next=11,a.getContentsByCollectionType(a.state.selectedCollectionType[0].value,a.state.page,a.state.pageSize);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.componentWillUnmount=function(){a.shouldShowEtSaveBtn("visible")},a.populateConfigForm=Object(s.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.selectedCollectionTypeValue.value||!a.props.selectedCollectionTypeValue.label){e.next=13;break}if(a.setState({selectedCollectionType:[a.props.selectedCollectionTypeValue]}),!a.props.searchText||!a.props.colLabel){e.next=11;break}return a.searchByKey=a.props.colLabel,a.setState({searchQuery:a.props.searchText,stowSearchQueryTillSubmit:a.props.searchText}),e.next=7,q(a.props.selectedCollectionTypeValue.value,a.props.searchText,a.props.colLabel,1,5);case 7:t=e.sent,a.stateUpdateOnFilterContentsByName(t),e.next=13;break;case 11:return e.next=13,a.getContentsByCollectionType(a.props.selectedCollectionTypeValue.value);case 13:a.props.selectedContentList.length&&a.setState({selectedContent:ue(a.props.selectedContentList)});case 14:case"end":return e.stop()}}),e)}))),a.shouldShowEtSaveBtn=function(e){var t,n=Object(oe.a)(document.getElementsByClassName("pull-right save btn btn-primary"));try{for(n.s();!(t=n.n()).done;){t.value.style.visibility=e}}catch(a){n.e(a)}finally{n.f()}},a.filterUidByApiPrefix=function(e){return e.filter((function(e){return e.uid.startsWith("api::")}))},a.open=function(){var e=Object(s.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({show:!0,contentDetailsOnModal:t,contentIdForModal:t&&t.id,activeTabKey:0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.close=function(){a.setState({show:!1})},a.setActiveTabKey=function(e){a.setState({activeTabKey:e})},a.handleCollectionTypeChange=function(){var e=Object(s.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.searchByKey="",a.props.setFieldSearchBy(""),a.setState({contents:[],selectedContent:[]}),n=t[0],a.setState({selectedCollectionType:t,searchQuery:"",stowSearchQueryTillSubmit:""}),!n||!n.value){e.next=8;break}return e.next=8,a.getContentsByCollectionType(n.value);case 8:a.setState({contentIdForModal:void 0});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getContentsByCollectionType=function(){var e=Object(s.a)(b.a.mark((function e(t,n,c){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loadingData:!0}),e.next=3,G(t,n,c);case 3:s=e.sent,a.setState({contents:s.results,lastPage:s.pagination.pageCount,page:s.results.length?s.pagination.page:0,currPageWillUpdating:s.results.length?s.pagination.page:0,pageSize:s.pagination.pageSize,totalItems:s.pagination.total,setSearchBy:s&&s.results.length&&Object.keys(s.results[0])[1],loadingData:!1});case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),a.renderToggleButton=function(e){e.isMenuShown;var t=e.onClick;return Object(I.jsx)("button",{type:"button",style:{position:"absolute",height:"100%",top:"0px",right:"0px",border:"1px solid lightgray"},onClick:function(e){e.preventDefault(),t(e)},children:Object(I.jsx)("span",{className:"fa fa-angle-down"})})},a.setPage=function(e){var t=Number(e);if(!Number.isNaN(e)&&""!==e&&t>0&&t<=a.totalPages()){var n=Object.assign({},a.state.pagination);n.page=t,a.setState({pagination:n,pageChangeValue:t})}},a.onContentSearch=function(){var e=Object(s.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.setState({searchQuery:a.state.stowSearchQueryTillSubmit},Object(s.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.setFieldSearchBy(a.searchByKey),!a.state.searchQuery){e.next=9;break}return a.setState({loadingData:!0}),e.next=5,q(a.state.selectedCollectionType[0].value,a.state.searchQuery,a.searchByKey,1,5);case 5:t=e.sent,a.stateUpdateOnFilterContentsByName(t),e.next=10;break;case 9:a.getContentsByCollectionType(a.state.selectedCollectionType[0].value);case 10:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleQueryChange=function(e){e.preventDefault(),a.setState({stowSearchQueryTillSubmit:e.target.value})},a.onPerPageSelect=function(e){a.setState({searchBtnClk:!1}),a.setState({pageSize:e})},a.onPageInput=function(e){a.setState({currPageWillUpdating:e.target.value})},a.onSubmit=function(){+a.state.currPageWillUpdating&&a.state.currPageWillUpdating<=a.state.lastPage&&a.setState({page:+a.state.currPageWillUpdating})},a.onContentListSaveHandler=function(){a.props.setQueryTerm(a.state.searchQuery),a.props.setContentTemplate(a.state.selectedContent.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{contentId:e.id,templateId:null})}))),a.props.setSelectedContentName(a.state.selectedCollectionType[0].value,a.state.selectedCollectionType[0].label,a.state.searchQuery)},a.checkIfSelected=function(e){if(a.state.selectedContent.length&&a.state.selectedContent.find((function(t){return t.id===e.id})))return!0;return!1},a.fetchTitleOrName=function(e){if(e){var t=Object.keys(e),n=t.findIndex((function(e){return"title"===e.toLowerCase()}));if(n>-1)return a.searchByKey=Object.keys(e)[n],e[Object.keys(e)[n]];if((n=t.findIndex((function(e){return"name"===e.toLowerCase()})))>-1)return a.searchByKey=Object.keys(e)[n],e[Object.keys(e)[n]];var c=t.filter((function(e){return!R.includes(e)}));if(c&&c.length)return a.searchByKey=c[0],e[c[0]]}return a.searchByKey="","-"},a.editMode=function(e){return"edit"===a.props.isEditable&&Object.keys(a.props.selectedCollectionTypeValue).length&&a.props.selectedCollectionTypeValue.label&&a.props.selectedCollectionTypeValue.value?a.props.selectedCollectionTypeValue[e]:null},a.cancelHandler=function(){return a.props.setSelectedContentName(a.editMode("value"),a.editMode("label")),"edit"===a.props.isEditable&&a.state.selectedContent.length?(a.setState({searchQuery:""}),void a.props.setQueryTerm("")):"edit"!==a.props.isEditable||a.props.searchText?void 0:(a.setState({searchQuery:""}),void a.props.setQueryTerm(""))},a.state={page:1,currPageWillUpdating:1,pageSize:5,totalItems:20,lastPage:4,pageInput:1,pageChangeValue:1,searchBtnClk:!1,show:!1,activeTabKey:0,contentDetailsOnModal:{},searchQuery:"",setSearchBy:"",stowSearchQueryTillSubmit:"",collectionType:[],selectedCollectionType:[],contents:[],selectedContent:[],contentIdForModal:"",tempSelectedCollectionType:[],loadingData:!1},a.searchByKey="",a}return Object(r.a)(n,[{key:"stateUpdateOnFilterContentsByName",value:function(e){this.setState({contents:e.results,lastPage:e.pagination.pageCount,page:e.results.length?e.pagination.page:0,currPageWillUpdating:e.results.length?e.pagination.page:0,pageSize:e.pagination.pageSize,totalItems:e.pagination.total,searchBtnClk:!0,loadingData:!1})}},{key:"setCollectionTypeState",value:function(){var e=Object(s.a)(b.a.mark((function e(){var t,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:t=e.sent,n=t.data,a=this.filterUidByApiPrefix(n),this.setState({collectionType:a.map((function(e){return{label:e.info.displayName,value:e.info.singularName}}))});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changePage",value:function(e){this.setState({page:e,currPageWillUpdating:e})}},{key:"onContentSelect",value:function(e){if(this.state.selectedContent.find((function(t){return t.id===e.id}))){var t=this.state.selectedContent.filter((function(t){return t.id!==e.id}));this.setState({selectedContent:t})}else this.setState({selectedContent:[e].concat(Object(Oe.a)(this.state.selectedContent))})}},{key:"isToEnableSaveQueryBtn",value:function(){return!(0===this.state.selectedContent.length&&this.state.contents&&this.state.contents.length)}},{key:"render",value:function(){var e,t=this,n={page:this.state.page?this.state.page:1,perPage:this.state.pageSize,perPageOptions:w},a=0===this.state.totalItems?0:(this.state.page-1)*this.state.pageSize+1,c=Math.min(this.state.page*this.state.pageSize,this.state.totalItems);return Object(I.jsxs)(pe.Grid,{children:[Object(I.jsx)(pe.Row,{className:"mt-2",children:Object(I.jsx)(pe.Col,{lg:12,children:Object(I.jsx)("legend",{children:Object(I.jsx)(S.a,{id:"app.contentList"})})})}),Object(I.jsx)(pe.Row,{className:"mt-2",children:Object(I.jsx)(pe.Col,{lg:3,children:Object(I.jsx)("h6",{children:Object(I.jsx)("b",{children:Object(I.jsx)(S.a,{id:"app.selectCollectionType"})})})})}),Object(I.jsx)(pe.Row,{children:Object(I.jsx)(pe.Col,{lg:3,children:Object(I.jsx)(ye.a,{id:"collectionTypeDropdown",placeholder:this.props.intl.formatMessage({id:"app.selectCollection"}),emptyLabel:this.props.intl.formatMessage({id:"app.noMatchesFound"}),options:this.state.collectionType,onChange:this.handleCollectionTypeChange,selected:this.state.selectedCollectionType,children:function(e){var n=e.isMenuShown,a=e.toggleMenu;return t.renderToggleButton({isMenuShown:n,onClick:a})}})})}),Object.keys(this.state.selectedCollectionType).length>0&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(pe.Row,{className:"mt-2",children:Object(I.jsx)(pe.Col,{lg:3,children:Object(I.jsx)("h5",{style:{marginBottom:"0px"},children:Object(I.jsx)("strong",{children:this.state.selectedCollectionType&&this.state.selectedCollectionType[0]&&this.state.selectedCollectionType[0].label})})})}),Object(I.jsx)(pe.Row,{children:Object(I.jsx)(pe.Col,{lg:12,children:Object(I.jsx)("div",{className:"ContentsFilter well",role:"button",tabIndex:0,style:{margin:"1rem 0rem"},children:Object(I.jsxs)("form",{children:[Object(I.jsxs)("div",{style:{display:"flex",margin:"1rem 0rem"},children:[Object(I.jsx)("button",{id:"dropdown-example",role:"button","aria-haspopup":"true","aria-expanded":"false",type:"button",className:"dropdown-toggle btn btn-default",children:k}),Object(I.jsx)("input",{type:"search",name:"name",value:this.state.stowSearchQueryTillSubmit,onChange:this.handleQueryChange,role:"combobox",className:"rbt-input-main form-control rbt-input",placeholder:this.props.intl.formatMessage({id:"app.searchContentByName"})})]}),Object(I.jsx)("div",{className:"pull-right mbt10",style:{margin:"0 0 10px 0"},children:Object(I.jsx)("button",{className:"btn btn-primary",onClick:this.onContentSearch,children:Object(I.jsx)(S.a,{id:"app.search"})})})]})})})}),Object(I.jsx)(pe.Row,{className:"mt-2",children:Object(I.jsxs)(pe.Col,{lg:12,children:[this.state.loadingData&&Object(I.jsx)(he.Spinner,{loading:this.state.loadingData,className:"",size:"md"}),!this.state.loadingData&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("table",{className:"table dataTable table-striped table-bordered table-hover",children:[Object(I.jsx)("thead",{children:Object(I.jsx)("tr",{children:Object.keys(B).map((function(e){return Object(I.jsx)("th",{children:B[e]},e)}))})}),Object(I.jsx)("tbody",{children:this.state.contents.map((function(e){return Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{width:"5%",align:"center",children:Object(I.jsx)("input",{onChange:function(){t.onContentSelect(e),t.state.selectedContent.length||t.props.setQueryTerm("")},type:"checkbox",checked:t.checkIfSelected(e),id:e+e.id,name:"content",value:e.id})}),Object(I.jsx)("td",{role:"button",onClick:function(){return t.open(e)},children:t.fetchTitleOrName(e)}),Object(I.jsx)("td",{role:"button",onClick:function(){return t.open(e)},children:"".concat(e.createdBy.firstname," ").concat(e.createdBy.lastname)}),Object(I.jsx)("td",{role:"button",onClick:function(){return t.open(e)},children:T()(new Date(e.updatedAt)).format(W)}),Object(I.jsx)("td",{role:"button",onClick:function(){return t.open(e)},children:T()(new Date(e.publishedAt)).format(W)})]},e.id)}))})]}),Object(I.jsx)("div",{className:"custom-page"}),Object(I.jsx)(pe.PaginationRow,{itemCount:this.state.totalItems,itemsStart:a,itemsEnd:c,viewType:"table",pagination:n,amountOfPages:this.state.lastPage?this.state.lastPage:1,pageInputValue:this.state.currPageWillUpdating?this.state.currPageWillUpdating:1,onPageSet:this.changePage,onPerPageSelect:this.onPerPageSelect,onFirstPage:function(){t.setState({searchBtnClk:!1}),t.changePage(1)},onPreviousPage:function(){t.setState({searchBtnClk:!1}),t.changePage(t.state.page-1)},onPageInput:this.onPageInput,onNextPage:function(){t.setState({searchBtnClk:!1}),t.changePage(t.state.page+1)},onLastPage:function(){t.setState({searchBtnClk:!1}),t.changePage(t.state.lastPage)},onSubmit:this.onSubmit,messages:(e=this.props,{firstPage:e.intl.formatMessage({id:"app.firstPage"}),previousPage:e.intl.formatMessage({id:"app.previousPage"}),currentPage:e.intl.formatMessage({id:"app.currentPage"}),nextPage:e.intl.formatMessage({id:"app.nextPage"}),lastPage:e.intl.formatMessage({id:"app.lastPage"}),perPage:e.intl.formatMessage({id:"app.perPage"}),of:e.intl.formatMessage({id:"app.of"})})})]})]})}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(pe.Row,{className:"mt-2",children:Object(I.jsx)(pe.Col,{sm:12,children:Object(I.jsx)("h6",{children:Object(I.jsx)("b",{children:Object(I.jsx)(S.a,{id:"app.widgetConfiguration"})})})})}),Object(I.jsxs)(pe.Row,{className:"mt-2",children:[Object(I.jsx)(pe.Col,{sm:2,children:Object(I.jsx)(S.a,{id:"app.queryFilter"})}),Object(I.jsx)(pe.Col,{sm:10,className:"queryBg",children:Object(I.jsxs)("code",{children:[Object(I.jsxs)("span",{style:{color:"#0088ce"},children:[Object(I.jsx)("b",{children:"Collection Type =  "})," ",this.state.selectedCollectionType[0].label," "]}),Object(I.jsxs)("span",{style:{color:"#0088ce"},children:[this.state.searchQuery.length>0&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("b",{children:"WHERE Name = "})," %",this.state.searchQuery,"% "]}),Object(I.jsx)("b",{children:"ORDER BY"})," creation date ",Object(I.jsx)("b",{children:"DESC"})]})]})})]})]}),this.state.selectedContent.length>0&&this.state.selectedContent.map((function(e){return Object(I.jsxs)(pe.Row,{className:"mt-2",style:{borderBottom:"1px solid lightgrey",padding:".5rem"},children:[Object(I.jsx)(pe.Col,{sm:2,style:{borderRight:"1px solid lightgrey"},children:t.fetchTitleOrName(e)}),Object(I.jsx)(pe.Col,{sm:8,children:t.state.selectedCollectionType&&t.state.selectedCollectionType[0].label}),Object(I.jsx)(pe.Col,{sm:2,className:"SingleContentConfigFormBody__addButtons",children:Object(I.jsx)("button",{className:"btn",onClick:function(){return t.onContentSelect(e)},children:Object(I.jsx)(S.a,{id:"app.remove"})})})]},e.id)})),Object(I.jsxs)(pe.Row,{className:"SingleContentConfigFormBody__actionBar row",children:[Object(I.jsx)(pe.Col,{sm:6}),Object(I.jsx)(pe.Col,{sm:6,className:"SingleContentConfigFormBody__addButtons",children:Object(I.jsxs)(re.b,{to:"/",children:[Object(I.jsx)("button",{className:"btn-default btn",onClick:function(){return t.cancelHandler()},children:Object(I.jsx)(S.a,{id:"app.cancel"})}),Object(I.jsx)("button",{className:"btn-primary btn AddContentTypeFormBody__save--btn",onClick:function(){return t.onContentListSaveHandler()},disabled:this.isToEnableSaveQueryBtn(),children:Object(I.jsx)(S.a,{id:"app.saveAsQuery"})}),Object(I.jsx)("button",{className:"btn-primary btn AddContentTypeFormBody__save--btn",onClick:function(){return t.onContentListSaveHandler()},disabled:!this.state.selectedContent.length,children:Object(I.jsx)(S.a,{id:"app.saveAsListOfContents"})})]})})]})]}),Object(I.jsx)(Ee,{show:this.state.show,onHide:this.close,contentDetailsOnModal:this.state.contentDetailsOnModal,contentId:this.state.contentIdForModal,collectionType:this.state.selectedCollectionType&&this.state.selectedCollectionType.length&&this.state.selectedCollectionType[0].value,fetchTitleOrName:this.fetchTitleOrName,activeTabKey:this.state.activeTabKey,setActiveTabKey:this.setActiveTabKey})]})}}]),n}(m.Component),Qe=Object(me.c)(Ze),ze=n(17),Je=(a={"app.contentList":"Content List","app.selectCollectionType":"Select Collection Type","app.info":"Info","app.content":"Content","app.contentsButton":"contents","app.contentButton":"content","app.name":"Name","app.created":"Created by","app.lastEdited":"Last edited","app.createdDate":"Created date","app.selectDefaultTemplate":"Select default template*","app.addExistingContent":"Add existing ","app.addNewContent":"Add new content","app.select":"Select","app.selectCollection":"Choose an option","app.widgetConfiguration":"Widget Configuration","app.queryFilter":"Query Filter","app.cancel":"Cancel","app.savedAsQuery":"Saved as Query","app.saveAsQuery":"Save as Query","app.saveAsListOfContents":"Save as list of Contents"},Object(ze.a)(a,"app.select","Select"),Object(ze.a)(a,"app.createdEdited","Created Edited"),Object(ze.a)(a,"app.searchContentByName","Filter By Name..."),Object(ze.a)(a,"app.remove","Remove"),Object(ze.a)(a,"app.query"," Query"),Object(ze.a)(a,"app.selectTemplate","Select Template"),Object(ze.a)(a,"app.edit","Edit"),Object(ze.a)(a,"app.queryFilter"," Query Filter"),Object(ze.a)(a,"app.search","Search"),Object(ze.a)(a,"app.applyToAllContents","Apply to all contents"),Object(ze.a)(a,"app.noMatchesFound","No matches found"),Object(ze.a)(a,"app.noDataAvailable","No data available"),Object(ze.a)(a,"app.firstPage","First Page"),Object(ze.a)(a,"app.previousPage","Previous Page"),Object(ze.a)(a,"app.currentPage","Current Page"),Object(ze.a)(a,"app.nextPage","Next Page"),Object(ze.a)(a,"app.lastPage","Last Page"),Object(ze.a)(a,"app.perPage","per page"),Object(ze.a)(a,"app.of","of"),a),Ue=(c={"app.contentList":"Content Elenco","app.selectCollectionType":"Seleziona Tipo di raccolta","app.info":"Informazioni","app.content":" Contenuto","app.contentsButton":"contenuti","app.contentButton":"contenuto","app.name":"Nome","app.created":"Creata da","app.lastEdited":"Ultima modifica","app.createdDate":"Creata Data","app.selectDefaultTemplate":"Seleziona il modello predefinito*","app.addExistingContent":"Aggiungi esistente","app.addNewContent":"Aggiungi nuovo contenuto","app.select":"Seleziona","app.selectCollection":"Scegliere un'opzione","app.widgetConfiguration":"Configurazione del widget","app.queryFilter":"Filtro di query","app.cancel":"Annulla","app.savedAsQuery":"Salvato come query","app.saveAsQuery":"Salva come query","app.saveAsListOfContents":"Salva come elenco di contenuti"},Object(ze.a)(c,"app.select","Selezionare"),Object(ze.a)(c,"app.createdEdited","Data di Creazione"),Object(ze.a)(c,"app.searchContentByName","Filtra per nome"),Object(ze.a)(c,"app.remove","Rimuovere"),Object(ze.a)(c,"app.query","Domanda"),Object(ze.a)(c,"app.selectTemplate","Seleziona Modello"),Object(ze.a)(c,"app.edit","modificare"),Object(ze.a)(c,"app.query","Filtro di query"),Object(ze.a)(c,"app.search","Ricerca"),Object(ze.a)(c,"app.applyToAllContents","Applica a tutti i contenuti"),Object(ze.a)(c,"app.noMatchesFound","Nessun risultato trovato"),Object(ze.a)(c,"app.noDataAvailable","Nessun dato disponibile"),Object(ze.a)(c,"app.firstPage","Prima pagina"),Object(ze.a)(c,"app.previousPage","Pagina precedente"),Object(ze.a)(c,"app.currentPage","Pagina corrente"),Object(ze.a)(c,"app.nextPage","Pagina successiva"),Object(ze.a)(c,"app.lastPage","Ultima pagina"),Object(ze.a)(c,"app.perPage","per pagina"),Object(ze.a)(c,"app.of","di"),c);function _e(){return Object(I.jsxs)("div",{className:"well",children:[Object(I.jsx)("div",{children:Object(I.jsx)("h4",{children:Object(I.jsxs)("strong",{children:[Object(I.jsx)("span",{className:"pficon pficon-warning-triangle-o"})," ","http://172.40.0.142:1337"," can't be reached. Please click ",Object(I.jsx)("a",{href:"http://172.40.0.142:3001",target:"_blank",children:"here"})," to configure it."]})})}),Object(I.jsx)("div",{className:"mt-2",children:Object(I.jsx)(pe.Button,{bsStyle:"primary",onClick:function(){return window.location.reload()},children:"Reload Page"})})]})}var Ve=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.setLocale()},a.componentDidUpdate=function(e,t){e.config!==a.props.config&&a.setLocale()},a.setContentTemplate=function(e){var t=JSON.stringify(e.map((function(e){return{templateId:e.templateId,contentId:e.contentId}})));a.setState({mappingOfContentTemplate:e.length?JSON.stringify(e):"",contentIdAndTemplateId:encodeURI(t)})},a.setSelectedContentName=function(e,t){a.setState({selectedContentName:e,selectedCollectionType:t})},a.setQueryTerm=function(e){a.setState({searchText:e})},a.SaveQueryHandler=function(e){a.setState({saveQuery:encodeURI(JSON.stringify(e))})},a.setFieldSearchBy=function(e){a.setState({colLabel:e})},a.setLocale=function(){var e=a.props.config&&a.props.config.locale;e.length&&a.setState({locale:e})},a.manipulateIsEditable=function(e){return a.setState({isEditable:e})},a.decideLocale=function(e){return"en"===e?Je:"it"===e?Ue:void 0},a.shouldShowEtSaveBtn=function(e){var t,n=Object(oe.a)(document.getElementsByClassName("pull-right save btn btn-primary"));try{for(n.s();!(t=n.n()).done;){t.value.style.visibility=e}}catch(a){n.e(a)}finally{n.f()}},a.state={selectedContentName:null,mappingOfContentTemplate:"",contentIdAndTemplateId:"",selectedCollectionType:null,searchText:"",saveQuery:"",colLabel:"",locale:"en",isEditable:""},a}return Object(r.a)(n,[{key:"render",value:function(){return localStorage.getItem(Q)||this.shouldShowEtSaveBtn("hidden"),Object(I.jsx)(le.a,{locale:this.state.locale,messages:this.decideLocale(this.state.locale),children:Object(I.jsx)(I.Fragment,{children:localStorage.getItem(Q)?Object(I.jsx)(re.a,{children:Object(I.jsxs)(ie.c,{children:[Object(I.jsx)(ie.a,{path:"/",exact:!0,children:Object(I.jsx)(fe,{selectedContent:this.state.mappingOfContentTemplate,mappingOfContentTemplate:this.state.mappingOfContentTemplate,setContentTemplate:this.setContentTemplate,selectedContentLabel:this.state.selectedCollectionType,searchTerm:this.state.searchText,SaveQueryHandler:this.SaveQueryHandler,selectedContentName:this.state.selectedContentName,manipulateIsEditable:this.manipulateIsEditable,contentIdAndTemplateId:this.state.contentIdAndTemplateId,saveQuery:this.state.saveQuery})}),Object(I.jsx)(ie.a,{path:"/configpage",exact:!0,children:Object(I.jsx)(Qe,{setContentTemplate:this.setContentTemplate,setSelectedContentName:this.setSelectedContentName,setQueryTerm:this.setQueryTerm,setFieldSearchBy:this.setFieldSearchBy,searchText:this.state.searchText,selectedCollectionTypeValue:{label:this.state.selectedCollectionType,value:this.state.selectedContentName},selectedContentList:this.state.mappingOfContentTemplate,colLabel:this.state.colLabel,isEditable:this.state.isEditable})})]})}):Object(I.jsx)(_e,{})})})}}]),n}(m.Component),Ge=Object(h.a)("config"),Xe=Object(h.a)("updateConfig"),He=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(o.a)(this,n),e=t.call(this),Object.defineProperty(Object(i.a)(e),Xe,{value:Ke}),Object.defineProperty(Object(i.a)(e),Ge,{writable:!0,value:{locale:"en"}}),e.getStrapiConfiguration=Object(s.a)(b.a.mark((function t(){var n,a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.removeItem(Q),t.next=3,ne();case 3:if(n=t.sent,a=n.data,n.isError||!a||!a.data||!a.data.baseUrl){t.next=11;break}return t.next=9,ae(a.data.baseUrl);case 9:(c=t.sent)&&c.data&&200===c.data.status&&!c.isError&&localStorage.setItem(Q,a.data.baseUrl);case 11:e.render();case 12:case"end":return t.stop()}}),t)}))),e.reactRootRef=g.a.createRef(),e.mountPoint=null,e}return Object(r.a)(n,[{key:"attributeChangedCallback",value:function(e,t,n){Object(u.a)(this,Xe)[Xe](n),this.getStrapiConfiguration()}},{key:"config",get:function(){return this.reactRootRef&&this.reactRootRef.current?this.reactRootRef.current.state:{}},set:function(e){return this.reactRootRef&&this.reactRootRef.current?this.reactRootRef.current.setState(e):{}}},{key:"connectedCallback",value:function(){this.mountPoint=document.createElement("div"),this.appendChild(this.mountPoint),this.getStrapiConfiguration()}},{key:"render",value:function(){var e=Object(I.jsx)(Ve,{ref:this.reactRootRef,config:Object(u.a)(this,Ge)[Ge]});O.a.render(e,this.mountPoint)}}],[{key:"observedAttributes",get:function(){return["config"]}}]),n}(Object(d.a)(HTMLElement));function Ke(e){Object(u.a)(this,Ge)[Ge]=JSON.parse(e)}customElements.get("list-content-widget-config")||customElements.define("list-content-widget-config",He);n(740)}},[[741,1,2]]]);
//# sourceMappingURL=main.90d88955.chunk.js.map